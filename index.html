<html>
<head>
<title>experimental logo</title>
<!-- $Id$ -->
<style>
canvas { border:1px solid black;}
#oldcode {font-family: monospace;display: block; white-space: pre;overflow: scroll; margin: 10px;}
.left {float:left; width:49%;}
.right {float:left; left-margin:1%; width:49%;}

</style>
<script src="turtle.js"></script>
<script src="logo.js"></script>
<script>

var turtle = null;
var logo = null;

function init (canvas_id,form_id,oldcode_id) {
    
    var canvas = document.getElementById(canvas_id);
    var form = document.getElementById(form_id);
    
    canvas.width = 500;
    canvas.height = 500;
    
    form.code.style.width = "90%";
    form.code.style.height = "200px";
    
    oldcode = document.getElementById(oldcode_id);
    oldcode.style.width = "90%";
    oldcode.style.height = "300px";
    
    logo = new Logo()
    
    fast = 10;
    turtle = new DelayTurtle(canvas,fast);
    logo.setTurtle(turtle);

}

function run (speed) {
        if (speed != fast) {
            fast = speed;
            var newturtle = null;
            turtle.stop();
            if (fast == 0) {
                newturtle = new Turtle(canvas);
            } else {
                newturtle = new DelayTurtle(canvas,fast);
            }
            logo.setTurtle(newturtle);
            turtle = newturtle;
        }
        var code = form.code.value;

        oldcode.innerHTML +="\n"+code
        //form.code.value = ""

        
        var out = logo.run(code);
                
        if (out && out.type == "error") {
            alert(out.data);
            init();
        }
}

function stop(){
    turtle.stop();
}
    
</script>
</head>
<body onload="init('canvas','form','oldcode');">
<div class="left column">
<canvas id="canvas" width="500" height="500">
Is broken
</canvas>
</div>
<div class="right column">
<form id="form" onSubmit="run(); return false;" action="#">
<div id="oldcode">&nbsp;</div>
<div>
<textarea id="code">
to spiral :co :lm
forward :co
right 30
color [0  2 * :co 255 - :co]
penwidth :co % 10
make "co :co + 1
ifelse :co &lt; :lm [spiral :co :lm] [stop]
end

reset
spiral 1 100

</textarea></div>
<div>
<input type="button" onClick="run(50);" value="run and draw very slowly"/>
<input type="button" onClick="run(10);" value="run and draw slowly"/>
<input type="button" onClick="stop();" value="stop"/>
<input type="button" onClick="run(0);" value="run  and draw fast"/>


<input type="reset" value="reset form"/>
</div>
</form>
</div>

<p> Supported: forward n (fw), backward n (bw), right n (rt), left n (lt), penup (pu), pendown (pd), clear (cs), reset, repeat n [commands], to name :args commands end. color [ r g b], penwidth n, greater? a b, less? a b and? a b, or? a b, and so on. I will put a proper list here soon.</p>

<a href="http://code.google.com/p/papert">papert on google code</a>



</body>
</html>
